[phases.setup]
nixPkgs = ['nodejs_20', 'openssl', 'chromium']

[phases.install]
cmds = [
  'npm ci',
  'npx prisma generate'
]

# Variables de entorno para Puppeteer
[phases.setup.nixPkgsEnvironment]
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD = 'true'
PUPPETEER_EXECUTABLE_PATH = '/nix/store/*/bin/chromium'

[phases.build]
cmds = ['npm run build']

[start]
cmd = 'npm run start:prod'
