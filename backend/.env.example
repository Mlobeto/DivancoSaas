# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=3000
NODE_ENV="development"

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL="postgresql://user:password@localhost:5432/divancosaas?schema=public"

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
# JWT Secret - Generar con: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# JWT Token expiration (7d = 7 días, 24h = 24 horas, 30m = 30 minutos)
JWT_EXPIRES_IN="7d"

# Refresh Token (opcional - implementar si necesario)
JWT_REFRESH_SECRET="your-refresh-token-secret"
JWT_REFRESH_EXPIRES_IN="30d"

# ============================================
# CORS - Frontend Origins
# ============================================
# Separar múltiples origins con comas
# Desarrollo: http://localhost:5173,http://localhost:3001
# Producción: https://app.tudominio.com,https://admin.tudominio.com
CORS_ORIGIN="http://localhost:5173"

# ============================================
# PLATFORM BILLING (SaaS Subscriptions)
# ============================================
# Stripe (Global) - Para billing de la plataforma SaaS
STRIPE_SECRET_KEY=""
STRIPE_WEBHOOK_SECRET=""

# Wompi (Colombia - 3DS)
WOMPI_PUBLIC_KEY=""
WOMPI_PRIVATE_KEY=""
WOMPI_EVENTS_SECRET=""
WOMPI_ENVIRONMENT="test" # test or production

# MercadoPago (LATAM)
MERCADOPAGO_ACCESS_TOKEN=""
MERCADOPAGO_PUBLIC_KEY=""
MERCADOPAGO_WEBHOOK_SECRET=""

# ============================================
# EMAIL SERVICE
# ============================================
# SendGrid (recomendado para producción)
SENDGRID_API_KEY=""
SENDGRID_FROM_EMAIL="noreply@tudominio.com"
SENDGRID_FROM_NAME="DivancoSaas"

# SMTP (legacy - opcional)
SMTP_HOST=""
SMTP_PORT=587
SMTP_USER=""
SMTP_PASS=""

# ============================================
# FILE STORAGE
# ============================================
# Azure Blob Storage
AZURE_STORAGE_CONNECTION_STRING=""
AZURE_STORAGE_CONTAINER_NAME="divancosaas-files"

# Azure Communication Services (Email)
AZURE_COMMUNICATION_CONNECTION_STRING=""
AZURE_EMAIL_FROM="" # Azure Managed: DoNotReply@xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.azurecomm.net
AZURE_EMAIL_FROM_NAME="DivancoSaas"

# AWS S3 (alternativa)
# AWS_ACCESS_KEY_ID=""
# AWS_SECRET_ACCESS_KEY=""
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="divancosaas-files"

# ============================================
# WHATSAPP INTEGRATION
# ============================================
# Meta WhatsApp Business API
META_WHATSAPP_PHONE_NUMBER_ID=""
META_WHATSAPP_ACCESS_TOKEN=""
META_WHATSAPP_WEBHOOK_VERIFY_TOKEN=""
META_WHATSAPP_WEBHOOK_SECRET=""

# ============================================
# INVOICE PROVIDERS (Multi-tenant)
# ============================================
# Taxxa (Mexico CFDI)
TAXXA_API_KEY=""
TAXXA_ENVIRONMENT="sandbox" # sandbox | production

# Divanco (Custom)
DIVANCO_API_KEY=""
DIVANCO_API_SECRET=""
DIVANCO_BASE_URL="https://api.divanco.com"

# ============================================
# DIGITAL SIGNATURE
# ============================================
# SignNow
SIGNOW_API_KEY=""
SIGNOW_ENVIRONMENT="sandbox" # sandbox | production
SIGNOW_WEBHOOK_SECRET="" # Random secret for webhook validation

# ============================================
# SHIPPING PROVIDERS (Multi-tenant)
# ============================================
# FedEx
FEDEX_CLIENT_ID=""
FEDEX_CLIENT_SECRET=""
FEDEX_ACCOUNT_NUMBER=""
FEDEX_ENVIRONMENT="sandbox" # sandbox | production

# DHL (futuro)
# DHL_API_KEY=""
# DHL_API_SECRET=""

# UPS (futuro)
# UPS_CLIENT_ID=""
# UPS_CLIENT_SECRET=""

# ============================================
# SMS PROVIDERS (opcional)
# ============================================
# Twilio
TWILIO_ACCOUNT_SID=""
TWILIO_AUTH_TOKEN=""
TWILIO_PHONE_NUMBER=""

# ============================================
# RATE LIMITING & SECURITY
# ============================================
# Rate limit: máximo de requests por ventana de tiempo
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000 # 15 minutos en milisegundos

# ============================================
# LOGGING & MONITORING
# ============================================
# Log level: error | warn | info | debug
LOG_LEVEL="info"

# Sentry (opcional - error tracking en producción)
# SENTRY_DSN=""

# ============================================
# TESTING
# ============================================
# Base de datos de testing (usar una DB diferente)
TEST_DATABASE_URL="postgresql://user:password@localhost:5432/divancosaas_test?schema=public"

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 1. NUNCA commitear .env con valores reales a git
# 2. En producción, usar variables de entorno del hosting
# 3. Rotar secrets periódicamente
# 4. Generar JWT_SECRET único: openssl rand -base64 32
# 5. Webhooks requieren URLs públicas con HTTPS en producción

